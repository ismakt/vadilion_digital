<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<style>
:root{ --bg:#000000; --overlay: rgba(0,0,0,0.85); --panel:#0e0e0e; --panel-2:#151515; --border:#2a2a2a; --gold:#c9a24d; --text:#ffffff; --muted:#b5b5b5; }
*{ box-sizing:border-box; border-radius: 16px; margin:0; padding:0; font-family:Arial, Helvetica, sans-serif; }
body{ background:var(--bg); color:var(--text); min-height:100vh; display:flex; flex-direction:column; }
/* HEADER */
header{ display:flex; justify-content:space-between; padding:15px; z-index:20; position:relative; }
.lang { display: inline-flex; align-items: center; justify-content: center; height: 28px; border: 1px solid var(--border); padding: 4px 12px; border-radius: 4px; font-size: 14px; line-height: 1; background-color: #000; }
.lang span{ cursor:pointer; margin: 0 4px; }
.lang .active{ color: var(--gold); }
/* MAIN */
main{ flex:1; display:flex; flex-direction:column; align-items:center; position:relative; padding:20px; overflow:hidden; }
/* VANTA BG */
#vanta-bg{ position:absolute; top:0; left:0; width:100%; height:100%; z-index:0; }
.menu, .panel, .modal { position: relative; z-index: 10; }
/* MENU */
.menu{ display:flex; gap:40px; position:absolute; top:23%; left:50%; transform:translateX(-50%); z-index:10; }
.menu button{ background:none; border:none; color:var(--text); font-size:18px; cursor:pointer; font-weight: 600; }
.menu button:hover{color:var(--gold);}
/* PANELS */
.panel{ display:none; position:absolute; top:calc(20% + 50px); left:50%; transform:translateX(-50%); background:var(--panel); border:1px solid var(--border); padding:20px; max-width:600px; width:100%; z-index:15;  color: #ffffff;  }
.panel h3{ color:var(--gold); margin-bottom:10px; cursor:pointer; }
.panel p{ font-size:14px; line-height:1.6;  }
.sub{display:none;margin-top:10px;}
/* FOOTER */
.footer-line{ height:1px; background:var(--border); }
.footer-content{ display:flex; justify-content:space-around; padding:10px; font-size:13px; }
.footer-content span{cursor:pointer;}
/* MODAL */
.modal{ display:none; position:fixed; inset:0; background: rgba(0, 0, 0, 0.5); backdrop-filter: blur(1px); z-index:9999; justify-content:center; align-items:center; }
.modal-content{ background:var(--panel-2); border:1px solid var(--border); padding:20px; max-width:600px; width:100%; position:relative; }
.modal-content h4{ color:var(--gold); margin-bottom:10px; }
.modal-content p{ font-size:13px; color:var(--muted); margin-bottom:12px; }
.modal-content input, .modal-content textarea{ width:100%; margin-bottom:10px; background:#000; border:1px solid var(--border); color:#fff; padding:8px; }
.close{ position:absolute; top:8px; right:10px; cursor:pointer; }
/* BUTTONS */
.btn-linkedin, .btn-instagram, .btn-send, .btn-video, .btn-smartin
  { display: inline-block; margin-top: 12px; padding: 8px 16px; background-color: #555; color: #fff; 
   text-decoration: none; font-weight: 400; font-size: 12px; border-radius: 6px; transition: color 0.3s, background 0.3s; border: none; cursor: pointer; }
  
/* MOBILE */

@media (max-width:768px) {
  .menu {
    position: static;
    transform: none;
    margin-bottom: 20px;
  }
  
  .panel {
    position: static;
    transform: none;
  }
}


  
.blur-background { filter: blur(1px); }
.brand { position: relative; display: flex; flex-direction: column; align-items: flex-start; }
.brand h1 { color: var(--gold); font-size: 15px; letter-spacing: 1px; z-index: 1; }
.brand .logo { position: absolute; top: 20px; left: 0; width: 160px; height: auto; border-radius: 0; z-index: 0; }












.modal-smartin-content{
  width:95%;
  max-width:1200px;
  height:90vh;
  display:flex;
  flex-direction:column;
}

.smartin-layout{
  display:flex;
  gap:20px;
  flex:1;
  overflow:hidden;
}

.smartin-left, .smartin-right{
  flex:1;
  display:flex;
  flex-direction:column;
  gap:10px;
  overflow-y:auto;
  padding: 10px; /* <-- ajoute de l'espace pour ne pas coller aux bords */


}



  .smartin-left {
  display: flex;
  flex-direction: column;
  gap: 12px;  /* espace entre chaque champ, y compris le textarea et les thèmes */
}


  

.map-mock{
  height:180px;
  border:1px solid var(--border);
  display:flex;
  align-items:center;
  justify-content:center;
  color:var(--muted);
}

.summary-box{
  border:1px solid var(--border);
  padding:12px;
  margin-top:10px;
  flex:1;
  overflow-y:auto;
}


.mapPreview {
  width: 220px;      /* largeur du SVG (carte) */
  height: 220px;     /* hauteur du SVG */
  border: none ;
  margin: 12px auto; /* centre le conteneur */
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 7px;     /* <-- espace autour du SVG */
  box-sizing: content-box; /* padding ajouté autour du contenu */
}


  
.projectDetails {
  min-height: 180px;  /* hauteur minimum */
  resize: vertical;   /* permet à l'utilisateur de redimensionner verticalement si besoin */
    flex: 1;             /* prend tout l'espace restant de la colonne */

}










  
</style>
</head>
<body>
<header>
  <div class="brand">
    <img src="images/vadiliondigital_logo.png" alt="Logo Vadilion Digital" class="logo">
  </div>
  <div class="lang">
    <span class="active" id="fr-btn">FR</span>|<span id="en-btn">EN</span>
  </div>
</header>
<main>
  <div id="vanta-bg"></div>
<div class="menu">
  <button onclick="togglePanel('about')">ABOUT</button>
  <button onclick="togglePanel('solutions')">SOLUTIONS</button>
</div>

<div class="panel" id="about">
  <div id="about-text" style="text-align: left;">
    <p>Nous allions business intelligence et data science pour développer des solutions uniques, à forte valeur ajoutée, 
      fondées sur des données fiables et répondant à des enjeux concrets.</p>
  </div>
</div>

<div class="panel" id="solutions">
  <div id="solutions-text">
    <div style="text-align: left;">

      <!-- Bouton Location Intelligence -->
      <button id="locationBtn" class="btn-smartin" style="width:auto; text-align:left; font-weight:500;">SMART-IN</button>

      <!-- Contenu déroulant caché par défaut -->
      <div id="locationContent" style="display:none; margin-top:12px; border-top:1px solid var(--border); padding-top:12px;">

        <p>
          Constatant la difficulté pour les investisseurs et entrepreneurs à obtenir une information transparente sur le marché, 
          et contraints de discerner entre embellissements et réalités, une volonté forte est née : offrir une alternative.
          Smart-IN est une application indépendante, offrant un accès transparent aux données cruciales pour tout projet immobilier ou commercial. 
          Découvrez-la : choisissez votre ville et les paramètres qui vous intéressent.</p><br>
         
        <p>Nos études sont développées autour des principaux piliers :</p>

        
        <ul>
          <li>Le marché : résilience, étude des concurrents et client potentiels</li>
          <li>Socioéconomie : population (âge, cultures), revenus, attractivité</li>
          <li>Immobilier & Projets urbains: impact et évolution des quartiers</li>
          <li>Indicateurs clés: sécurité, prix, pollution</li>
        </ul><br>

        <div class="btn-flex" style="margin-top:20px; display:flex; justify-content:center; gap:12px;">
          <button id="discoverSmartIn" class="btn-send">Discover Smart-In</button>
          <button id="presentationSmartIn" class="btn-video">Video</button>
        </div>
      </div>

    </div>
  </div>
</div>


</main>
<footer>
  <div class="footer-line"></div>
  <div class="footer-content">
    <span onclick="openModal('officeModal')">Offices: Bruxelles, Paris, Monaco</span>
    <span onclick="openModal('contactModal')">Contact</span>
    <span onclick="openModal('mediaModal')">Media</span>
  </div>
</footer>
<div class="modal" id="contactModal">
  <div class="modal-content">
    <span class="close" onclick="closeModal('contactModal')">✕</span>
    <h4 id="contact-text">Contactez-nous</h4>
    <p id="contact-text2">Nous écoutons attentivement vos besoins afin de vous proposer une solution précise et adaptée.</p>
    <input id="contact-name" placeholder="Nom" required>
    <input id="contact-info" placeholder="Coordonnées de contact" required>
    <textarea id="contact-message" placeholder="Comment pouvons nous vous aider?" maxlength="999" required></textarea>
    <button id="btn-send" class="btn-send">Envoyer</button>
  </div>
</div>
<div class="modal" id="mediaModal">
  <div class="modal-content">
    <span class="close" onclick="closeModal('mediaModal')">✕</span>
    <h4 id="our-media">Nos réseaux</h4>
    <a href="https://www.linkedin.com/company/vadiliondigital" target="_blank" class="btn-linkedin">LinkedIn</a>
    <a href="https://www.instagram.com/vadilion.digital" target="_blank" class="btn-instagram">Instagram</a>
  </div>
</div>
<div class="modal" id="officeModal">
  <div class="modal-content">
    <span class="close" onclick="closeModal('officeModal')">✕</span>
    <h4 id="offices">Offices</h4>
    <p id="offices-list">
      21 Avenue du Boulevard, Bruxelles (Financial District)<br><br>
      7 Rue Meyerbeer, Paris (Opéra Garnier)<br><br>
      74 Boulevard d'Italie, Monaco (Monte Carlo)
    </p>
  </div>
</div>
<div class="modal" id="videoModal">
  <div class="modal-content">
    <span class="close" onclick="closeModal('videoModal')">✕</span>
    <h4>Presentation Smart-In</h4>
    <div style="position:relative; padding-bottom:56.25%; height:0; overflow:hidden;">
      <iframe id="smartInVideo" src="https://www.youtube.com/embed/VqEbCxg2bNI" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen style="position:absolute; top:0; left:0; width:100%; height:100%;"></iframe>
    </div>
  </div>
</div>













<div class="modal modal-smartin" id="smartInModal">
  <div class="modal-content modal-smartin-content">

    <span class="close" onclick="closeModal('smartInModal')">✕</span>

    <h3 style="color:var(--gold); margin-bottom:12px;">Smart-In Contact</h3>

    <div class="smartin-layout">

      <!-- LEFT -->
      <div class="smartin-left">

        <label>Contact info</label>
        <input id="contactInfoSmartIn" placeholder="Email or phone">


        <label>Enter address (max 3, separated by commas)</label>
        <input id="addressInput" placeholder="Street 1, Street 2, Street 3">
        
<label>About your project</label> <textarea class="projectDetails" rows="10" placeholder="Describe your project, goals, constraints..."></textarea>

        <label>Select themes</label>
        <div class="themes">
          <label><input type="checkbox" id="selectAllThemes"> Select all</label>
          

        <label><input type="checkbox" value="Total sales 2013-2024"> Total Sales (2013-2024)</label>

          
  


  <label><input type="checkbox" value="ZP"> ZP</label>
          
  <label><input type="checkbox" value="Vols"> Vols</label>
          





  <!-- Coups et drogues -->
  <label><input type="checkbox" value="coups_blessures"> coups_blessures</label>
          
  <label><input type="checkbox" value="drogues"> Drogues</label>
          
  <label><input type="checkbox" value="alcool"> Alcool</label>
          
  <label><input type="checkbox" value="armes"> Armes</label>
  <!-- Sécurité publique -->
  <label><input type="checkbox" value="secu_publiq_2024"> Atteinte Securité Public</label>
          
  <!-- Dégradations et cambriolages -->
  <label><input type="checkbox" value="degradat_prop"> Degradatations de propriété</label>
          
  <label><input type="checkbox" value="Cambriolages"> Cambriolages</label>
  <!-- Population -->
  <label><input type="checkbox" value="Densité de Population"> Densité de Population</label>
  <label><input type="checkbox" value="% Population agée de 18 à 64 ans">% Population agée de 18 à 64 ans</label>
  <label><input type="checkbox" value="Solde migratoire"> Solde migratoire</label>
  <label><input type="checkbox" value="Population Croissance Annuelle"> Population Croissance Annuelle</label>

  <!-- Immigration -->
  <label><input type="checkbox" value="% Population immigrée">% Population immigrée</label>
          
 
  <!-- Revenus et emploi -->
  <label><input type="checkbox" value="Taux natalité"> Taux natalité</label>
  <label><input type="checkbox" value="Revenu Médian"> Revenu Médian</label>
  <label><input type="checkbox" value="Taux emploi"> Taux emploi</label>
          
          
  <label><input type="checkbox" value="Taux par type d'occupation">Taux par type d'occupation</label>
          
  <label><input type="checkbox" value="Taux chomage"> Taux chomage</label>
  <label><input type="checkbox" value="Taux GRAPA 65+"> Taux GRAPA 65+</label>
  <label><input type="checkbox" value="Taux naissances sans revenu de travail"> Taux naissances sans revenu de travail</label>
  <label><input type="checkbox" value="Taux naissances meres etrangeres"> Taux naissances meres etrangeres</label>
  <label><input type="checkbox" value="Taux retard scolaire"> Taux retard scolaire</label>

  <!-- Logements et immobilier -->
  <label><input type="checkbox" value="Sieges sociaux & Etablissements"> Sieges sociaux & Etablissements</label>
  <label><input type="checkbox" value="Solde migration entreprises"> Solde migration entreprises</label>
          
  <label><input type="checkbox" value="Espace verts">Espace verts</label>
          

  <label><input type="checkbox" value="Parc Immobilier">Parc Immobilier (social, résidentiel)</label>
        
          
  <label><input type="checkbox" value="Loyer moyen"> Loyer moyen</label>
          
  <label><input type="checkbox" value="Nb Appartements">Nombre d'appartements vendus</label>
          
  <label><input type="checkbox" value="Nombre de maisons vendus">Nombre de maisons vendus</label>
          
  <label><input type="checkbox" value="Prix median appartements"> Prix median appartements</label>
          
  <label><input type="checkbox" value="Prix median maisons"> Prix median maisons</label>
          
  <label><input type="checkbox" value="Secteurs economiques majeures"> Secteurs economiques majeures</label>
  <label><input type="checkbox" value="Gentrification"> Gentrification</label>

  <!-- Nationalités -->
  <label><input type="checkbox" value="Cultural Composition">Cultural Composition</label>
 
  <!-- Projets et pollutions -->
  <label><input type="checkbox" value="Urban & Real Estate projects (recent, current, future)">Urban & Real Estate projects (recent, current, future)</label>
  <label><input type="checkbox" value="M2 price///">M2 price</label>
  <label><input type="checkbox" value="Pollution (air, noise)">Pollution (air, noise)</label>


          
        </div>

      </div>

      <!-- RIGHT -->
      <div class="smartin-right">


        <div class="summary-box">
          <h4>Summary</h4>
          <div id="summaryContent">No data yet</div>
        </div>


              <label>Select city</label>
        <select id="citySelect">
          <option value="">Select a city</option>
          <option value="Brussels">Brussels</option>
        </select>

<div id="mapPreview" class="mapPreview"></div>


        

        <button class="btn-send" onclick="sendSmartIn()">Send</button>

      </div>

    </div>
  </div>
</div>




























  










  






  
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r134/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/vanta/dist/vanta.dots.min.js"></script>
<script>

  // --- Coordonnées du contour de Bruxelles ---
const bruxellesContour = [
  [50.897838, 4.377298],
  [50.902392, 4.344199],
  [50.900750, 4.327877],
  [50.893973, 4.312415],
  [50.889656, 4.293477],
  [50.880728, 4.297330],
  [50.870691, 4.284429],
  [50.866247, 4.278776],
  [50.860285, 4.281114],
  [50.855783, 4.289664],
  [50.854185, 4.283001],
  [50.837543, 4.281821],
  [50.835917, 4.258190],
  [50.825902, 4.253997],
  [50.819764, 4.243681],
  [50.817496, 4.245000],
  [50.817085, 4.256735],
  [50.811082, 4.261090],
  [50.812229, 4.273701],
  [50.808397, 4.276143],
  [50.812222, 4.299704],
  [50.812324, 4.305595],
  [50.803639, 4.301175],
  [50.799089, 4.305103],
  [50.795488, 4.317261],
  [50.775451, 4.330906],
  [50.773641, 4.340649],
  [50.775478, 4.345166],
  [50.768587, 4.382710],
  [50.763681, 4.383142],
  [50.793553, 4.482248],
  [50.808672, 4.447815],
  [50.818897, 4.459151],
  [50.820568, 4.476968],
  [50.835620, 4.465399],
  [50.837835, 4.468433],
  [50.852329, 4.461708],
  [50.863419, 4.426335],
  [50.868019, 4.421486],
  [50.877840, 4.428538],
  [50.878911, 4.436795],
  [50.891065, 4.427108],
  [50.894867, 4.432491],
  [50.907473, 4.413091],
  [50.911571, 4.414397],
  [50.914253, 4.403035],
  [50.910627, 4.393672],
  [50.909910, 4.387689],
  [50.897407, 4.378014]
];

const bruxellesInterior = [
  [50.847886, 4.351187],
  [50.882791, 4.327702],
  [50.875713, 4.304439],
  [50.865721, 4.291617],
  [50.863093, 4.329683],
  [50.856711, 4.309934],
  [50.830774, 4.302340],
  [50.818363, 4.328158],
  [50.827020, 4.344418],
  [50.824415, 4.373052],
  [50.796912, 4.364271],
  [50.802678, 4.412690],
  [50.832807, 4.391470],
  [50.830684, 4.431618],
  [50.847373, 4.434946],
  [50.872396, 4.405943],
  [50.860920, 4.380985],
  [50.851763, 4.372782]
];



const citySelect = document.getElementById('citySelect');
const addressInput = document.getElementById('addressInput');
const projectDetails = document.getElementById('projectDetails');
const contactInfoSmartIn = document.getElementById('contactInfoSmartIn');
const summaryContent = document.getElementById('summaryContent');





  
let currentPanel = null;
function togglePanel(id){
  document.querySelectorAll('.panel').forEach(p => p.style.display='none');
  if(currentPanel === id){ currentPanel = null; return; }
  document.getElementById(id).style.display = 'block';
  currentPanel = id;
}











  

document.getElementById('discoverSmartIn').textContent = "Discover Smart-In";
document.getElementById('discoverSmartIn').addEventListener('click', () => {
  openModal('smartInModal');
});

  document.getElementById('selectAllThemes').addEventListener('change', e => {
  document.querySelectorAll('.theme').forEach(cb => cb.checked = e.target.checked);
  updateSummary();
});

  function updateSummary(){
  const city = citySelect.value;
  const addresses = addressInput.value;
  const themes = [...document.querySelectorAll('.theme:checked')]
    .map(t => t.parentElement.textContent.trim());

  summaryContent.innerHTML = `
    <b>City:</b> ${city || '-'}<br>
    <b>Addresses:</b> ${addresses || '-'}<br>
    <b>Themes:</b> ${themes.join(', ') || '-'}
  `;
}

['citySelect','addressInput','projectDetails','contactInfoSmartIn']
.forEach(id => document.getElementById(id).addEventListener('input', updateSummary));



  
const frBtn = document.getElementById('fr-btn');
const enBtn = document.getElementById('en-btn');
frBtn.addEventListener('click', () => {
  frBtn.classList.add('active'); enBtn.classList.remove('active');
   document.getElementById('about-text').innerHTML = `<p>Nous allions business intelligence et data science pour développer des solutions uniques, à forte valeur ajoutée, 
      fondées sur des données fiables et répondant à des enjeux concrets.</p>`;
  document.getElementById('solutions-text').innerHTML = `<div style="text-align:left;">
  
       
        <p>
          Constatant la difficulté pour les investisseurs et entrepreneurs à obtenir une information transparente sur le marché, 
          et contraints de discerner entre embellissements et réalités, une volonté forte est née : offrir une alternative.
          Smart-In est une application indépendante, offrant un accès transparent aux données cruciales pour tout projet immobilier ou commercial. 
          Découvrez-la : choisissez votre ville et les paramètres qui vous intéressent.</p><br>
         
        <p>Nos études sont développées autour des principaux piliers :</p>

        
        <ul>
          <li>Le marché : résilience, étude des concurrents et client potentiels</li>
          <li>Socioéconomie : population (âge, cultures), revenus, attractivité</li>
          <li>Immobilier & Projets urbains: impact et évolution des quartiers</li>
          <li>Indicateurs clés: sécurité, prix, pollution</li>
        </ul><br>
    
      </ul><br>
  </div>
</div>`;




  


  document.getElementById('contact-text').textContent = "Contactez-nous";
  document.getElementById('contact-text2').textContent = "Nous écoutons attentivement vos besoins afin de vous proposer une solution précise et adaptée.";
  document.getElementById('contact-name').placeholder = "Nom";
  document.getElementById('contact-info').placeholder = "Coordonnées de contact";
  document.getElementById('contact-message').placeholder = "Comment pouvons-nous vous aider ?";
  document.getElementById('our-media').textContent = "Nos réseaux";
  document.getElementById('btn-send').textContent = "Envoyer";
  document.getElementById('btn-smartin').textContent = "SMART-IN";
  
});
  
enBtn.addEventListener('click', () => {
  enBtn.classList.add('active'); frBtn.classList.remove('active');

  document.getElementById('about-text').innerHTML = document.getElementById('about-text').innerHTML = 
    `<p>We combine business intelligence and data science to develop unique, high-value solutions built on reliable data and designed to address concrete business challenges.</p>`;

  
document.getElementById('solutions-text').innerHTML = `
<div style="text-align: left;">
  <button id="locationBtn" class="btn-smartin" style="width:auto; text-align:left; font-weight:600;">SMART-IN</button>
  <div id="locationContent" style="display:none; margin-top:12px; border-top:1px solid var(--border); padding-top:12px;">
    
<p>
    Noting the difficulty investors and entrepreneurs face in obtaining transparent market information, 
    and often forced to distinguish between embellishments and reality, a strong desire has emerged: to offer an alternative. 
    Smart-In is an independent application, providing transparent access to crucial data for any real estate or commercial project. 
    Discover it: choose your city and the parameters that interest you.
</p><br>

<p>Our studies are built around the following key pillars:</p>

<ul>
    <li>Market: resilience, competitor analysis, and potential customers</li>
    <li>Socioeconomics: population (age, cultures), income, attractiveness</li>
    <li>Real Estate & Urban Projects: impact and evolution of neighborhoods</li>
    <li>Key Indicators: safety, prices, pollution</li>
</ul><br>

<div class="btn-flex" style="margin-top:20px; display:flex; justify-content:center; gap:12px;">
  <button id="discoverSmartIn" class="btn-send">Discover Smart-In</button>
  <button id="presentationSmartIn" class="btn-video">Video</button>
</div>

  </div>
</div>`;




// Réattacher les event listeners pour ce nouveau sous-menu
const locationBtnEn = document.getElementById('locationBtn');
const locationContentEn = document.getElementById('locationContent');
let locationOpenEn = false;
locationBtnEn.addEventListener('click', () => {
  locationOpenEn = !locationOpenEn;
  locationContentEn.style.display = locationOpenEn ? 'block' : 'none';
});
locationBtnEn.addEventListener('mouseenter', () => {
  locationContentEn.style.display = 'block';
  locationOpenEn = true;
});

// Boutons Discover Smart-In et Présentation Video
  



  
document.getElementById('presentationSmartIn').addEventListener('click', () => openModal('videoModal'));



  


  
  document.getElementById('contact-text').textContent = "Contact us";
  document.getElementById('contact-text2').textContent = "We listen carefully to your needs to deliver a precise, tailored solution.";
  document.getElementById('contact-name').placeholder = "Name";
  document.getElementById('contact-info').placeholder = "Contact info";
  document.getElementById('contact-message').placeholder = "How can we help you?";
  document.getElementById('our-media').textContent = "Our media";
  document.getElementById('btn-send').textContent = "Send";
});

// Gestion du sous-menu Location Intelligence
const locationBtn = document.getElementById('locationBtn');
const locationContent = document.getElementById('locationContent');
let locationOpen = false;

// Fonction pour ouvrir/fermer au clic
locationBtn.addEventListener('click', () => {
  locationOpen = !locationOpen;
  locationContent.style.display = locationOpen ? 'block' : 'none';
});

// Fonction pour ouvrir au survol
locationBtn.addEventListener('mouseenter', () => {
  locationContent.style.display = 'block';
  locationOpen = true;
});

// On ne ferme pas au mouseleave, fermeture uniquement au clic sur locationBtn


  
let vantaEffect = VANTA.DOTS({ el:"#vanta-bg", mouseControls:true, touchControls:true, gyroControls:false, minHeight:200, minWidth:200, scale:1.0, scaleMobile:1.0, color:0xcffb7, color2:0x5520ff, backgroundColor:0x0, size:3.2, spacing:24, showLines:false });

function openModal(id){
  const modal = document.getElementById(id);
  modal.style.display = 'flex';
  document.body.style.overflow = 'hidden';
  document.querySelector('main').classList.add('blur-background');
  
  // supprime l’ancienne carte à chaque ouverture
  if(id === 'smartInModal'){
    const container = document.getElementById('mapPreview');
    container.innerHTML = '';
  }
}

  citySelect.addEventListener('change', () => {
  const container = document.getElementById('mapPreview');
  container.innerHTML = ''; // supprime l’ancienne carte ou placeholder

  // si la ville sélectionnée est Brussels ET que le modal est ouvert
  if(citySelect.value === "Brussels" && document.getElementById('smartInModal').style.display === 'flex'){
    requestAnimationFrame(drawPreMap); // dessine la carte
  }
});


// Fonction closeModal à l’extérieur
function closeModal(id){
  const modal = document.getElementById(id);
  modal.style.display = 'none';
  document.body.style.overflow = 'auto';
  document.querySelector('main').classList.remove('blur-background');

  if(id==='videoModal'){
    const iframe = document.getElementById('smartInVideo');
    iframe.src = iframe.src;
  }
}









function sendSmartIn(){
  alert("Smart-In request sent (mock)");
}


  
 



function drawPreMap() {
  const container = document.getElementById('mapPreview');
  container.innerHTML = ''; // supprime le placeholder

  const width = container.offsetWidth;
  const height = container.offsetHeight;

  const padding = 15; // espace autour de la carte

  const svgNS = "http://www.w3.org/2000/svg";
  const svg = document.createElementNS(svgNS, 'svg');
  svg.setAttribute('width', '100%');
  svg.setAttribute('height', '100%');
  container.appendChild(svg);

  // Normalisation
  const lons = bruxellesContour.map(c => c[1]);
  const lats = bruxellesContour.map(c => c[0]);
  const lonMin = Math.min(...lons);
  const lonMax = Math.max(...lons);
  const latMin = Math.min(...lats);
  const latMax = Math.max(...lats);

  function scaleX(lon) {
    return padding + ((lon - lonMin) / (lonMax - lonMin)) * (width - 2 * padding);
  }
  function scaleY(lat) {
    // inversion Y pour que le nord soit en haut
    return padding + (height - 2 * padding) - ((lat - latMin) / (latMax - latMin)) * (height - 2 * padding);
  }

  // --- Relief progressif ---
  const layers = 3;
  const offsetStep = 1.2;
  const contourColor = '#969695';

  for (let i = layers; i > 0; i--) {
    const layer = document.createElementNS(svgNS, 'polygon');
    layer.setAttribute('fill', 'none');
    layer.setAttribute('stroke', contourColor);
    layer.setAttribute('stroke-width', 0.9);
    layer.setAttribute('stroke-linejoin', 'round');
    layer.setAttribute('stroke-opacity', 0.15 * i);
    layer.setAttribute(
      'points',
      bruxellesContour.map(c =>
        (scaleX(c[1]) + i * offsetStep) + ',' + (scaleY(c[0]) + i * offsetStep)
      ).join(' ')
    );
    layer.setAttribute('vector-effect', 'non-scaling-stroke');
    svg.appendChild(layer);
  }

  // --- Contour principal ---
  const polygon = document.createElementNS(svgNS, 'polygon');
  polygon.setAttribute('fill', 'none');
  polygon.setAttribute('stroke', contourColor);
  polygon.setAttribute('stroke-width', '0.6');
  polygon.setAttribute('stroke-linejoin', 'round');
  polygon.setAttribute('vector-effect', 'non-scaling-stroke');
  polygon.setAttribute(
    'points',
    bruxellesContour.map(c => scaleX(c[1]) + ',' + scaleY(c[0])).join(' ')
  );
  svg.appendChild(polygon);

  // --- Points intérieurs ---
  bruxellesInterior.forEach(c => {
    const x = scaleX(c[1]);
    const y = scaleY(c[0]);
    const size = 3;
    const diamond = document.createElementNS(svgNS, 'polygon');
    diamond.setAttribute('points', `
      ${x},${y-size}
      ${x+size},${y}
      ${x},${y+size}
      ${x-size},${y}
    `);
    diamond.setAttribute('fill', 'none');
    diamond.setAttribute('stroke', '#ccbb5a');
    diamond.setAttribute('stroke-width', '1');
    diamond.setAttribute('stroke-linejoin', 'round');
    svg.appendChild(diamond);
  });
}

</script>
</body>
</html>


































































